!function(e){var t={};function n(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(a,l,function(t){return e[t]}.bind(null,l));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var a;n(1),self.addLine=n(2).addLine,Object.assign(self,n(3)),self.River=n(4).River,self.sort=n(6).sort,Object.assign(self,n(7)),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")}),self.ItemHolder=[],riverarray.map(function(e,t){ItemHolder[t]=new River(t,e)}),n(9).loadUSGS(),window.NewList=function(e,t,n){"string"==typeof e&&(e=e.toLowerCase());let l=ItemHolder.slice(0);if(0!==String(e).length&&e&&t&&("sort"===t&&(a&&(l=a),l=sort(e,l,n)),"normal"===t&&(l=normalSearch(l,e)),"advanced"===t&&(l=advancedSearch(l,e)),"location"===t)){a&&(l=a);var o=[];l.forEach(function(t){t.plat&&t.plon&&distanceto(t.plat,t.plon)<e&&o.push(t)}),l=o}ItemHolder.forEach(function(e){e.delete()});var i=document.getElementById("Rivers");l.forEach(function(e){i.appendChild(e.create())}),"sort"!==t&&(a=l)},document.getElementById("Rivers").appendChild((new TopBar).create()),n(10),NewList("alphabetical","sort");let l=document.getElementById("searchbox");if(l.addEventListener("keydown",function(){setTimeout(function(){NewList(l.value,"normal")},20)}),document.getElementById("calculateCoordinates").addEventListener("click",async function(){let e,t=document.getElementById("locationProgress"),n=0,a=setInterval(function(){n=(n+1)%6,t.innerHTML="Calculating your Approximate Location (Expect this to take 15-60 seconds)"+".".repeat(n)},500);try{e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)})}catch(e){let n="Error code "+e.code+" occoured when getting your location. The error message is: "+e.message;alert(n),clearInterval(a),t.innerHTML=n}let l=e.coords;clearInterval(a),document.getElementById("latitudeQuery").value=l.latitude,document.getElementById("longitudeQuery").value=l.longitude,t.innerHTML="You are within "+l.accuracy+" meters of "+l.latitude+" degrees latitude and "+l.longitude+" degrees longitude."}),document.getElementById("performadvancedsearch").addEventListener("click",function(){let e=function(){let e={};e.name={type:document.getElementById("nameType").value,query:document.getElementById("nameQuery").value},e.section={type:document.getElementById("sectionType").value,query:document.getElementById("sectionQuery").value},e.writeup={type:document.getElementById("writeupType").value,query:document.getElementById("writeupQuery").value};let t=Number(document.getElementById("distanceQuery").value),n=document.getElementById("latitudeQuery").value,a=document.getElementById("longitudeQuery").value;return n=Number(n),a=Number(a),t>0||!n||!a?!(t>0)||n&&a?t>0&&n&&a&&(e.location={lat:n,lon:a,distance:t,includeUnknown:document.getElementById("includeUnknown").checked}):alert("You must enter a latitude and longitude (Get the coordinates from GPS by pressing Calculate my Location)"):alert("Distance must be a number greater than 0 to use location sorting"),e.skill={type:"from",query:[Number(document.getElementById("skillQuery1").value),Number(document.getElementById("skillQuery2").value)]},e}(),t=window.location.href;t=t.slice(0,t.lastIndexOf("/")+1);let n=encodeURI(t+"#"+JSON.stringify(e));document.getElementById("searchlink").innerHTML='Link to this search: <a href="'+n+'">'+n+"</a>",NewList(e,"advanced",!1)}),window.location.hash.length>0){let e=decodeURI(window.location.hash.slice(1));try{let t=JSON.parse(e);NewList(t,"advanced")}catch(t){document.getElementById("searchbox").value=e,NewList(e,"normal")}}},function(e,t){let n=document.styleSheets[0];if(!n){console.warn("No stylesheet available. There must be an existing stylesheet in order for allPages.js to function properly without inline style allowed or without document.body.");let e=document.createElement("style");document.body.appendChild(e),n=document.styleSheets[0]}try{if(n.cssRules[n.cssRules.length-1]instanceof CSSMediaRule){if(window.darkMode=localStorage.getItem("prefersDarkMode"),"null"===window.darkMode&&(window.darkMode=null),"false"===window.darkMode&&(window.darkMode=!1),"true"===window.darkMode&&(window.darkMode=!0),null===window.darkMode&&(window.darkMode=window.matchMedia("(prefers-color-scheme: dark)").matches),!0===window.darkMode&&!1===window.matchMedia("(prefers-color-scheme: dark)").matches){let e=n.cssRules[n.cssRules.length-1].cssText,t=(e=e.slice(e.indexOf("{")+1,-1)).split("\n");for(let e=0;e<t.length;e++){let a=t[e];""!==a.trim()&&n.insertRule(a,n.cssRules.length)}}!1===window.darkMode&&!0===window.matchMedia("(prefers-color-scheme: dark)").matches&&n.removeRule(n.cssRules.length-1),window.darkMode&&(n.insertRule("a:link {color: #3333FF;}",n.cssRules.length),n.insertRule("a:visited {color: purple;}",n.cssRules.length),n.insertRule("a:hover {color: green;}",n.cssRules.length),n.insertRule("a:active {color: red;}",n.cssRules.length))}}catch(e){console.error(e)}n.insertRule("html body {font-family: Arial, Helvetica, sans-serif}",n.cssRules.length);let a=window.location.href;a=a.slice(0,a.lastIndexOf("/")+1);let l=document.createElement("div");l.className="topnav";let o=[],i=document.createElement("a");i.href=a,i.innerHTML="River Info",o.push(i);let r=document.createElement("a");r.href=a+"about.html",r.innerHTML="About",o.push(r);let s=document.createElement("a");s.href=a+"FAQ.html",s.innerHTML="FAQ",o.push(s);let d=document.createElement("a");d.href=a+"settings.html",d.innerHTML="Settings",o.push(d);let c=window.location.href.slice(a.length);-1!==c.indexOf("#")&&(c=c.slice(0,c.indexOf("#")));for(let e=0;e<o.length;e++){let t=o[e];t.href.slice(a.length)===c&&(t.className="topnavcurrent"),l.appendChild(t)}document.body.insertBefore(l,document.body.firstChild),n.insertRule(".topnav {overflow: hidden}",n.cssRules.length),n.insertRule(".topnav {background-color: #24b9cc}",n.cssRules.length),n.insertRule(".topnav {margin:0px}",n.cssRules.length),n.insertRule(".topnav a {float: left}",n.cssRules.length),n.insertRule(".topnav a {display: block}",n.cssRules.length),n.insertRule(".topnav a {color: black}",n.cssRules.length),n.insertRule(".topnav a {text-align: center}",n.cssRules.length),n.insertRule(".topnav a {padding: 12px 13px}",n.cssRules.length),n.insertRule(".topnav a {text-decoration: none}",n.cssRules.length),n.insertRule(".topnav a {font-size: 17px}",n.cssRules.length),n.insertRule(".topnav a:hover {background-color: #359daa}",n.cssRules.length),n.insertRule(".topnavcurrent {background-color: #25d1a7}",n.cssRules.length),n.insertRule("\n.modal {\ndisplay: none; \nposition:fixed; \nz-index:1; \npadding-top: 5%;\nleft:0;\ntop:0;\nwidth:100%;\nheight: 100%;\noverflow:auto;\nbackground-color: rgba(0,0,0,0.4);\n}",n.cssRules.length),n.insertRule("\n.modal-content {\ncolor:black;\nbackground-color: #fefefe;\nmargin: auto;\npadding: 20px;\nborder: 1px solid #888;\nwidth: 90%;\n}",n.cssRules.length),n.insertRule("\n.modal-close {\ncolor: #aaaaaa;\nfloat: right;\nfont-size: 28px;\nfont-weight: bold;\n}",n.cssRules.length),n.insertRule("\n.modal-close:hover, .modal-close:focus {\ncolor: #000;\ntext-decoration: none;\ncursor: pointer;\n}",n.cssRules.length),window.darkMode&&n.insertRule("\t\n.modal-content {\nbackground-color:black;\ncolor:#cfcfcf;\n}",n.cssRules.length);let u=document.createElement("div");u.className="modal";let h=document.createElement("div");h.className="modal-content";let f=document.createElement("span");f.className="modal-close",f.innerHTML="×";let g=document.createElement("p");u.appendChild(h),h.appendChild(f),h.appendChild(g),document.body.appendChild(u),f.onclick=function(){u.style.display="none"},window.addEventListener("click",function(e){e.target===u&&(u.style.display="none")});class m extends HTMLElement{constructor(){super(),this.style.cursor="pointer",this.style.color="rgb(51, 51, 255)",this.style.textDecoration="underline",this.addEventListener("click",function(){let e="This overview ("+this.innerHTML+") is not available. This is likely due to a programming or data entry error";window.overviews&&window.overviews[this.innerHTML]&&(e=window.overviews[this.innerHTML]),g.innerHTML=e,u.style.display="block"})}}try{customElements.define("river-overview",m)}catch(e){console.error(e),navigator.userAgent.includes("Firefox")&&setTimeout(function(){alert("In order to view area overviews, you will need a browser that supports DOM customElements. You may be able to enable customElements in about:config")},4e3)}},function(e,t){e.exports.addLine=function(e,t,n,a,l,o,i,r,s){if(3===r)var d=s;2!==r&&(s=0);var c=.8*a.height,u=a.width,h=a.getContext("2d");if(!isNaN(Number(l))){l=[];for(var f=0;f<o.length;f++)l.push(f*u)}l.length!==o.length&&console.warn("Uneven amount of datapoints. "+l.length+" horizontal points found, but "+o.length+" vertical points found."),void 0===i&&(i="#000000"),h.strokeStyle=i,h.lineWidth=Math.ceil(Math.min(u,c)/120),h.beginPath(),u*=2===r?.86:.93;var g=[];for(f=0;f<o.length;f++)isNaN(Number(o[f]))||""===o[f]||g.push(o[f]);var m=Math.max(...g)-Math.min(...g),p=Math.max(...l)-Math.min(...l);m=c/m,p=u/p;var w=Math.min(...g),v=Math.min(...l);v-=.07*(Math.max(...l)-Math.min(...l));var y=Math.floor(.07*a.width/2.6);(h.font=y+"px serif",9===i.length&&(i=i.slice(0,7)),h.fillStyle=i,3===r)&&((I=h.createLinearGradient(0,0,0,c)).addColorStop(0,i),I.addColorStop(1,d),h.strokeStyle=I,h.fillStyle=I);if(0===s||void 0===s)var b=1;else b=a.width-.07*a.width;for(f=1;f<11;f++){var k=(Math.max(...g)-Math.min(...g))*((f-1)/10)+Math.min(...g);let e=Math.max(0,3-String(Math.round(k)).length);k=Number(k.toFixed(e)),h.fillText(k,b,c*(11-f)/10-5)}k=(Math.max(...g)-Math.min(...g))*((f-1)/10)+Math.min(...g);let M=Math.max(0,3-String(Math.round(k)).length);k=Number(k.toFixed(M)),h.fillText(k,b,27);y=Math.floor(.07*a.width/2.8);function x(e){var t=String(e.getHours());return e.getHours()<10&&(t+="0"),t+=":"+e.getMinutes(),e.getMinutes()<10&&(t+="0"),t+=" "+(e.getMonth()+1)+"/"+e.getDate()+"/"+e.getFullYear()}h.font=y+"px serif",9===i.length&&(i=i.slice(0,7)),window.darkMode?h.fillStyle="#cccccc":h.fillStyle="black";var E=new Date(t[0]),C=new Date(t[t.length-1]),L=new Date((C-E)/2+E.getTime()),S=x(E),T=x(C),R=x(L);h.fillText(S,10,a.height*(11/12)-.06*a.height-12),h.textAlign="end",h.fillText(T,a.width-10,a.height*(11/12)-.06*a.height-12),h.textAlign="center",h.fillText(R,a.width/2,a.height*(11/12)-.06*a.height-12),h.textAlign="start";var I;y=Math.floor(.07*a.width/2.4);(h.font=y+"px serif",h.fillStyle=i,3===r)&&((I=h.createLinearGradient(0,c,200,c)).addColorStop(0,i),I.addColorStop(1,d),h.strokeStyle=I,h.fillStyle=I);if(2===r)0===s||void 0===s?h.fillText("Flow (Cubic Feet/Second)",b+5,a.height*(11/12)):(h.textAlign="right",h.fillText("Gauge Height (Feet)",b-5,a.height*(11/12)),h.textAlign="start");else if(3===r)h.fillText("Water Temperature (°F)",b+5,a.height*(11/12));else if("Precipitation"===e){h.fillText("Precipitation (Inches)",b+5,a.height*(11/12));var N,F=0,H=0;(N=(N=o.slice(-96)).map(Number)).forEach(function(e){F+=e}),(N=N.slice(-48)).forEach(function(e){H+=e}),F=F.toFixed(2),H=H.toFixed(2),h.fillText("Last 24 Hours: "+F+" in",a.width-700,a.height*(11/12)),h.fillText("Last 12 Hours: "+H+" in",a.width-330,a.height*(11/12))}else"cfs"===e?h.fillText("Flow (Cubic Feet/Second)",b+5,a.height*(11/12)):"height"===e?h.fillText("Gauge Height (Feet)",b+5,a.height*(11/12)):h.fillText("Labeling Error...",b+5,a.height*(11/12));3===r&&((I=h.createLinearGradient(0,0,0,.8*a.height)).addColorStop(0,i),I.addColorStop(1,d),h.strokeStyle=I,h.fillStyle=I);function B(e){return Math.round((e-v)*p)}function A(e){return Math.round(c-(e-w)*m)}window.darkMode?h.fillStyle="#cccccc":h.fillStyle="black",h.textAlign="center",h.fillText(n,a.width/2,a.height-10),h.textAlign="start";for(var O=0;O<Math.min(o.length,l.length);O++)if(!isNaN(Number(o[O]))&&""!==o[O]){h.moveTo(B(l[O]),A(o[O]));break}var P=1;for(f=O;f<Math.min(o.length,l.length);f++)isNaN(Number(o[f]))||""===o[f]?P=0:1===P?h.lineTo(B(l[f]),A(o[f])):(h.moveTo(B(l[f]),A(o[f])+10),h.lineTo(B(l[f]),A(o[f])),P=1);h.stroke(),h.beginPath(),h.lineWidth=Math.ceil(h.lineWidth/10),window.darkMode?h.strokeStyle="#ccccccAA":h.strokeStyle="000000AA";for(f=1;f<11;f++)h.moveTo(0,c*(11-f)/10),h.lineTo(a.width,c*(11-f)/10);h.stroke()}},function(e,t){function n(e){let t=document.createElement("span");return t.className="riverspan",t.innerHTML=e,t}function a(e,t){e.onclick=function(){1===this.value?(NewList(t,"sort",!0),this.value=0):(NewList(t,"sort"),this.value=1)}}e.exports={TopBar:function(){this.create=function(){let e=document.createElement("button");e.id="topbar",e.className="riverbutton";let t=n("River⇅");return a(t,"alphabetical"),t.value=1,e.appendChild(t),e.appendChild(n("Section")),a(t=n("Skill⇅"),"skill"),t.value=0,e.appendChild(t),a(t=n("Rating⇅"),"rating"),t.value=1,e.appendChild(t),a(t=n("Flow Info/Trend⇅"),"running"),t.value=1,e.appendChild(t),e},this.delete=function(){let e=document.getElementById("topbar");e&&e.parentNode.removeChild(e)}}}},function(e,t,n){let a=n(5).addGraphs;function l(e,t){let n,a,l=["minrun","lowflow","midflow","highflow","maxrun"];for(let t=0;t<l.length;t++){let a=e[l[t]];if(!a){l[t]=void 0;continue}a=a.trim();let o=parseFloat(a),i=a.match(/[^\d|.]+/);if(i&&(i=i[0].trim()),!n&&i)n=i;else if(n!==i){console.warn(l[t]+" on "+e.name+" "+e.section+" has a different extension and has been skipped"),l[t]=void 0;continue}l[t]=o}"cfs"===n?a=e.cfs:"feet"!==n&&"ft"!==n||(a=e.feet);let o=t&&t.lightness||"50%";if(a<=l[0]){return e.running=0,"hsl(0,100%,"+(t&&t.lightness||"50%")+",60%)"}if(a>=l[4])return e.running=4,"hsl(240,100%,"+o+",60%)";{let t=l[0],n=l[4],r=l[2]||10**((Math.log10(t)+Math.log10(n))/2),s=l[1]||10**((Math.log10(t)+Math.log10(r))/2),d=l[3]||10**((Math.log10(r)+Math.log10(n))/2);function i(e,t,n){return e=Math.log(e),t=Math.log(t),((n=Math.log(n))-e)/(t-e)}return e.running=a<s?i(t,s,a):a<r?1+i(s,r,a):a<d?2+i(r,d,a):3+i(d,n,a),"hsl("+(0+60*e.running)+",100%,"+o+",30%"}}e.exports.River=function(e,t){switch(Object.assign(this,t),this.tags=this.tags||"",Number(this.rating)){case 1:this.rating="1Star";break;case 2:case 3:case 4:case 5:this.rating=t.rating+"Stars";break;default:this.rating="Error"}this.rating||(this.rating="Error"),this.base="b"+e,this.expanded=0,this.index=e,this.create=function(t){if(!this.finished||t){var n=document.createElement("button");function o(e){let t=document.createElement("span");return t.innerHTML=e,t.className="riverspan",n.appendChild(t),t}if(n.id=this.base+1,n.normalColor=(window.darkMode,""),n.focusedColor=window.darkMode?"#333333":"#e3e3e3",o(this.name),o(this.section),o(this.skill),"Error"===this.rating)o("???");else{let e=document.createElement("img");e.src="resources/"+this.rating+".png",e.alt=this.rating[0]+" Stars",e.className="starimg";let t=document.createElement("span");t.appendChild(e),t.className="riverspan",n.appendChild(t)}if(this.flow){o(this.flow+" "+function(e){let t=usgsarray[e];if(t){let e;if(t["00060"]?e=t["00060"].values:t["00065"]&&(e=t["00065"].values),e){let t,n,a=Math.max(e.length-5,0);for(let l=e.length;l>a;l--){let a=e[l];if(!a)continue;let o=a.value;t?n=o:t=o}if(t>n)return"⬆";if(n>t)return"⬇";if(t===n)return"-"}}}(this.usgs));this.minrun&&this.maxrun&&(n.normalColor=l(this),n.focusedColor=window.darkMode?l(this,{lightness:"75%"}):l(this,{lightness:"35%"}))}if(n.className="riverbutton",function(e,t){e.onclick=function(){let n=ItemHolder[t];if(0===n.expanded){n.expanded=1;var l=document.createElement("div");if(l.innerHTML=n.writeup+"<br>",n.plat&&n.plon&&(l.innerHTML+="<br>Put-In GPS Coordinates: "+n.plat+", "+n.plon),n.tlat&&n.tlon&&(l.innerHTML+="<br>Take-Out GPS Coordinates: "+n.tlat+", "+n.tlon),n.aw){l.appendChild(document.createElement("br")),l.appendChild(document.createElement("br"));let e=document.createElement("a");e.href="https://www.americanwhitewater.org/content/River/detail/id/"+n.aw,e.innerHTML="Click here to view this river on American Whitewater",l.appendChild(e)}self.usgsarray&&(data=self.usgsarray[n.usgs],a(l,data)),l.style.padding="6px",l.id=n.base+2,e.parentNode.insertBefore(l,e.nextSibling)}else{n.expanded=0;var o=document.getElementById(n.base+2);o&&o.parentNode.removeChild(o)}}}(n,e),n.addEventListener("mouseover",function(){this.style.backgroundColor=this.focusedColor}),n.addEventListener("mouseout",function(){this.style.backgroundColor=this.normalColor}),-1!==navigator.userAgent.toLowerCase().indexOf("google"))try{setTimeout(function(){n.dispatchEvent(new Event("click"))},100)}catch(e){}this.finished=n}return this.finished.style.backgroundColor=this.finished.normalColor,this.finished},this.delete=function(){let t=ItemHolder[e];function n(e){let n=document.getElementById(t.base+e);n&&n.parentNode.removeChild(n)}let a=document.getElementById(t.base+1);a&&(a.style.backgroundColor=""),n(2),n(1)}}},function(e,t){function n(){let e=document.createElement("canvas");e.width=1200,e.height=800;let t=e.getContext("2d");return window.darkMode?t.fillStyle="black":t.fillStyle="white",t.fillRect(0,0,e.width,e.height),e}function a(e){let t=[],n=[];for(let a=0;a<e.length;a++){let l=e[a];t.push(l.value),n.push(l.dateTime)}return{values:t,timestamps:n}}function l(e,t,l){if(!t&&!l)return;let o=n();if(t&&l){let e=a(t.values);addLine("cfs",e.timestamps,data.name,o,0,e.values,"#00AAFFa0",2),e=a(l.values),addLine("height",e.timestamps,data.name,o,0,e.values,"#2222FFa0",2,1)}else if(t){let e=a(t.values);addLine("cfs",e.timestamps,data.name,o,0,e.values,"#00AAFF")}else{let e=a(l.values);addLine("height",e.timestamps,data.name,o,0,e.values,"#2222FF")}let i=document.createElement("img");i.className="graph",i.src=o.toDataURL("image/png"),e.appendChild(i)}function o(e,t){if(t){let l=n(),o=a(t.values);addLine("",o.timestamps,data.name,l,0,o.values,"#FF0000",3,"#0000FF");let i=document.createElement("img");i.className="graph",i.src=l.toDataURL("image/png"),e.appendChild(i)}}function i(e,t){if(t){let l=n(),o=a(t.values);addLine("Precipitation",o.timestamps,data.name,l,0,o.values,"#0066FF");let i=document.createElement("img");i.className="graph",i.src=l.toDataURL("image/png"),e.appendChild(i)}}e.exports.addGraphs=function(e,t){if(!t)return;let n=t["00010"],a=t["00045"],r=t["00060"],s=t["00065"];e.appendChild(document.createElement("br")),e.appendChild(document.createElement("br"));try{l(e,r,s)}catch(e){console.warn("Error creating flow graph: "+e)}try{o(e,n)}catch(e){console.warn("Error creating temperature graph: "+e)}try{i(e,a)}catch(e){console.warn("Error creating precipitation graph: "+e)}}},function(e,t){function n(e,t){return e.sort(function(e,n){return e[t]>n[t]?1:e[t]<n[t]?-1:0}),e}function a(e,t){return e=n(e,"name"),t&&e.reverse(),e}function l(e,t){for(e=n(e,"rating"),t&&e.reverse();"Error"===e[0].rating;)e.push(e.shift());return e}function o(e,t){if(e.sort(function(e,t){function n(e){switch(e.skill){case"FW":e=1;break;case"B":e=2;break;case"N":e=3;break;case"LI":e=4;break;case"I":e=5;break;case"HI":e=6;break;case"A":e=7;break;case"E":e=8;break;default:e=9}return e}return n(e)-n(t)}),t)for(e.reverse();"?"===e[0].skill;)e.push(e.shift());return e}e.exports={ratingsort:l,alphabeticalsort:a,skillsort:o,sort:function(e,t,i){if("alphabetical"===e)t=a(t,i);else if("rating"===e)t=l(t,i);else if("skill"===e)t=o(t,i);else{if("running"!==e)throw"Unknown sorting method "+e;t=function(e,t){let a=[],l=[],o=[];return e.forEach(e=>{void 0!==e.running?o.push(e):e.flow?l.push(e):a.push(e)}),o=n(o,"running"),t&&o.reverse(),0===o.length?(alert("Flow data has not yet loaded."),e):o=(o=o.concat(l)).concat(a)}(t,i)}return t}}},function(e,t,n){function a(e){let t=e.content,n=e.query;if(e.matchCase||(t=t.toLowerCase(),n=n.toLowerCase()),"contains"===e.type)return t.includes(n);if("matches"===e.type)return t===n;throw"Unknown Search Type "+e.type}function l(e,t,n){for(let l in e){n.content=e[l][t],a(n)||delete e[l]}return e}function o(e){let t;switch(e){case"FW":t=1;break;case"B":t=2;break;case"N":t=3;break;case"LI":t=4;break;case"I":t=5;break;case"HI":t=6;break;case"A":t=7;break;case"E":t=8}return t}function i(e,t){let n=t.query,a=t.type,l=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);if("from"!==a)throw"Unknown search type"+a;for(let t in e){let n=!1,a=o(e[t].skill);l<=a&&a<=i&&(n=!0,console.log(l,a,i)),n||delete e[t]}}let r=n(8).lambert;function s(e,t){let n=t.distance,a=t.lat,l=t.lon;for(let o in e){let i,s=e[o],d=s.plat||s.tlat||s.hidlat,c=s.plon||s.tlon||s.hidlon;if(d&&c){i=r(a,l,d,c)<n}else i=t.includeUnknown;i||delete e[o]}return e}e.exports={normalSearch:function(e,t){let n=[[],[],[],[],[]];return e.forEach(function(e){-1!==e.tags.toLowerCase().indexOf(t)?-1!==e.name.toLowerCase().indexOf(t)?n[0].push(e):n[1].push(e):-1!==e.name.toLowerCase().indexOf(t)?n[2].push(e):-1!==e.section.toLowerCase().indexOf(t)?n[3].push(e):-1!==e.writeup.toLowerCase().indexOf(t)&&n[4].push(e)}),e=(e=n[0].concat(n[1],n[2],n[3])).concat(n[4])},advancedSearch:function(e,t){console.log(t);for(let n in t){let a=t[n];["name","section","writeup"].includes(n)?l(e,n,a):"skill"===n?i(e,a):"rating"===n||("location"===n?s(e,a):"sort"===n||alert("Unable to search based on "+n))}return e}};let d=document.getElementById("advanced-search-modal");document.getElementById("advanced-search-modal-close").onclick=function(){d.style.display="none"};window.addEventListener("click",function(e){e.target===d&&(d.style.display="none")}),document.getElementById("advancedsearch").addEventListener("click",function(){d.style.display="block"})},function(e,t){e.exports={lambert:function(e,t,n,a){e=e*Math.PI/180,t=t*Math.PI/180,n=n*Math.PI/180,a=a*Math.PI/180;let l=Math.atan(.9966471893352525*Math.tan(e)),o=Math.atan(.9966471893352525*Math.tan(n)),i=Math.acos(Math.sin(l)*Math.sin(o)+Math.cos(l)*Math.cos(o)*Math.cos(a-t)),r=(l+o)/2,s=(o-l)/2;return 3963.1905919430524*(i-.0016764053323737402*((i-Math.sin(i))*(Math.sin(r)**2*Math.cos(s)**2/Math.cos(i/2)**2)+(i+Math.sin(i))*(Math.cos(r)**2*Math.sin(s)**2/Math.sin(i/2)**2)))}}},function(e,t){self.usgsarray={},e.exports.loadUSGS=async function(){var e=[];for(let t=0;t<riverarray.length;t++){let n=riverarray[t].usgs;n&&n.length>7&&n.length<16&&e.push(n)}let t="https://waterservices.usgs.gov/nwis/iv/?format=json&sites="+e.join(",")+"&startDT="+new Date(Date.now()-864e5).toISOString()+"&parameterCd=00060,00065,00010,00045&siteStatus=all",n=await fetch(t);(await n.json()).value.timeSeries.forEach(function(e){let t={};if(t.values=e.values[0].value,0===t.values.length)return void console.log("Empty Array. Skipping");t.units=e.variable.variableDescription;let n=e.sourceInfo.siteCode[0].value;if(!usgsarray[n]){let t={};t.name=e.sourceInfo.siteName,usgsarray[n]=t}let a=e.variable.variableCode[0].value;if("00010"===a&&"Temperature, water, degrees Celsius"===t.units){for(let e=0;e<t.values.length;e++)t.values[e].value=1.8*t.values[e].value+32;t.units="Temperature, water, degrees Fahrenheit"}usgsarray[n][a]=t});for(let e=0;e<ItemHolder.length;e++){let t=ItemHolder[e],n=usgsarray[t.usgs];if(n){let e,a,l=n["00060"],o=n["00065"];l&&(l=l.values),o&&(o=o.values),l&&(e=l[l.length-1].value),o&&(a=o[o.length-1].value),t.feet=a,t.cfs=e,e&&a?t.flow=e+" cfs, "+a+" ft":e?t.flow=l[l.length-1].value+" cfs":a&&(t.flow=o[o.length-1].value+" ft");let i=document.getElementById(t.base+"1"),r=t.expanded;console.log(r);let s=t.create(!0);try{i.parentNode.replaceChild(s,i),r&&(s.dispatchEvent(new Event("click")),-1===navigator.userAgent.toLowerCase().indexOf("google")&&s.dispatchEvent(new Event("click")))}catch(e){}}}}},function(e,t){function n(){let e=document.getElementById("legend");e.getContext("2d").clearRect(0,0,e.width,e.height),e.style.backgroundColor=window.getComputedStyle(document.body).getPropertyValue("background-color");let t,n=parseFloat(window.getComputedStyle(document.getElementById("Rivers").firstChild).getPropertyValue("font-size"));(function(e,t){let n=e.getContext("2d");e.width=document.documentElement.clientWidth,e.height=t;let a=n.createLinearGradient(0,0,e.width,e.height);a.addColorStop(0,"hsl(0,100%,50%,60%)"),a.addColorStop(.08,"hsl(0,100%,50%,60%)");for(let e=0;e<=240;e++)a.addColorStop(.08+e/240*(.92-.08),"hsl("+e+",100%,50%,30%)");a.addColorStop(.92,"hsla(240,100%,50%,60%)"),a.addColorStop(1,"hsla(240,100%,50%,60%)"),n.fillStyle=a,n.fillRect(0,0,e.width,e.height)})(e,t=n>18?20+2*n:n>14.8?10+2*(n*=1.2):10+2*(n*=1.4)),function(e,t){let n=e.getContext("2d");n.fillStyle=window.darkMode?"white":"black";let a=t;n.font=t+"px Arial",n.textAlign="start",n.fillText("Too Low",0,a),n.textAlign="center",n.fillText("Low Flow",.28*e.width,a),n.fillText("Mid Flow",e.width/2,a),n.fillText("High Flow",.72*e.width,a),window.darkMode||(n.fillStyle="white"),n.textAlign="end",n.fillText("Too High",e.width,a,.2*e.width)}(e,n),function(e){let t=e.offsetTop;window.addEventListener("scroll",function(){window.pageYOffset>t?(e.style.position="fixed",e.style.top=0,document.body.style.paddingTop=e.height+"px"):(e.style.position="",e.style.top="",document.body.style.paddingTop=0)})}(e)}window.addEventListener("resize",n),window.addEventListener("orientationchange",n),n()}]);
//# sourceMappingURL=index.js.map